<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>I dissected Apple’s patent to figure out how iPhone X Face ID works | The Silicon Valley Times</title>
    <meta name="description" content="Live Smart">
    <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.ebcf3451.css" as="style"><link rel="preload" href="/assets/js/app.ceb45018.js" as="script"><link rel="preload" href="/assets/js/5.b399db6e.js" as="script"><link rel="prefetch" href="/assets/js/10.f1717623.js"><link rel="prefetch" href="/assets/js/11.6e9b7dc9.js"><link rel="prefetch" href="/assets/js/12.2c58dacf.js"><link rel="prefetch" href="/assets/js/13.477212b1.js"><link rel="prefetch" href="/assets/js/14.3c85e2b6.js"><link rel="prefetch" href="/assets/js/15.d555d2ad.js"><link rel="prefetch" href="/assets/js/16.56e9f81a.js"><link rel="prefetch" href="/assets/js/17.f392bef5.js"><link rel="prefetch" href="/assets/js/18.a009fe05.js"><link rel="prefetch" href="/assets/js/19.df22d470.js"><link rel="prefetch" href="/assets/js/2.8203c92b.js"><link rel="prefetch" href="/assets/js/3.809ce4f4.js"><link rel="prefetch" href="/assets/js/4.feef195f.js"><link rel="prefetch" href="/assets/js/6.d6cd2dd3.js"><link rel="prefetch" href="/assets/js/7.dcc80c68.js"><link rel="prefetch" href="/assets/js/8.cbfb13b5.js"><link rel="prefetch" href="/assets/js/9.35e52ca4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ebcf3451.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">The Silicon Valley Times</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1>I dissected Apple’s patent to figure out how iPhone X Face ID works</h1> <h5>By Kathy Li</h5> <h5>September 21, 2017</h5> <p><img src="/assets/img/2017/2017-09-21_iPhone-X_cover.png" alt="Cover"><br><br></p> <p><strong>USERS OF THE</strong> Samsung Galaxy S8 have reported that they are able to trick the smartphone’s facial recognition by presenting a photograph of the owner. At the latest <a href="https://siliconvalleytimes.com/news-2017-08-28/">launch event</a> held at Cupertino’s Steve Jobs Theater, the iPhone X was unveiled. Apple’s newest iPhone apparently also boasts facial recognition capabilities, but sans the same pitfall of the S8.</p> <p>Have you ever wondered how Apple was able to achieve the above? I, for one, have. A few months prior to the launch, <a href="https://techcrunch.com/2017/07/06/this-apple-patent-could-describe-facial-recognition-for-the-next-iphone/">TechCrunch</a> revealed a <a href="http://appft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&r=1&f=G&l=50&co1=AND&d=PG01&s1=20170193282.PGNR.&OS=DN/20170193282&RS=DN/20170193282">patent application</a> filed by Apple, thus spawning rumors about a potential face ID’ing feature. Now that Face ID has been officially announced, how closely does it match what has been described in the patent application? I read the full 22-page document to investigate.</p> <p>(Note: For simplicity, I will be referring to Apple’s <em>Presence Sensing</em> patent application as “the patent” from here on out.)</p> <p>(Note #2: Don’t get me wrong, I have talked to a number of friends who currently use the S8 and swear by it. It seems like a wonderful device overall.)</p> <h2>What we already know</h2> <p>If I were to read the legalese-heavy patent <em>before</em> knowing what would be released for sure, I would probably just end up grasping at straws. With the iPhone X cat now out of the bag, at least we have some confirmed hardware and features to base off of.</p> <p>At the launch event, Apple’s Phil Schiller already walked us through a brief introduction of how Face ID works from a user’s perspective. Let’s revisit it here.</p> <br> <p><img src="/assets/img/2017/2017-09-21_iPhone-X_01.png" alt="01"></p> <h6>Source: Apple</h6> <br> <p>According to Schiller, the verification is performed by the TrueDepth camera system, which is mostly packed into a tiny black bar sitting atop the screen. When you grab the iPhone X, the flood illuminator lights up your face with infrared (IR) light -- a type of light that is invisible to the human eye. The dot projector then projects over 30,000 invisible IR dots onto your face. The IR camera captures an IR image along with the dot pattern.</p> <p>The data set is passed into a neural network (powered by the A11 Bionic chip) to create a 3D mathematical model of your face, which is checked against the one stored during setup. If the system returns a match, your phone will be unlocked. </p> <p>While that’s all fine and dandy, my question is: How does the iPhone X know when to activate the 3D mapping captures? After all, it doesn’t seem very power efficient for the full-fledged Face ID function to be running <em>all the time</em>. Or so I would imagine. For example, when you are sleeping at night, you wouldn’t want your phone to be constantly taking 3D images of you, right?</p> <p>Based on what I have read in the document, I am guessing that the <em>Presence Sensing</em> component might be the key to the gate here. And if it’s smart enough to determine whether a real human is present or not, that would also explain why Face ID cannot be fooled by photographs.</p> <h2>Presence Sensing</h2> <p>As with most patent applications, the published document is basically full of legalese and complex mathematical formulas. I will do my best to translate the technobabble into a more readable form.</p> <p>In essence, Presence Sensing (PS) represents a system in a device that utilizes multiple sensors to help determine the device’s next state. It can operate even when the device is in sleep mode.</p> <br> <p><img src="/assets/img/2017/2017-09-21_iPhone-X_03.png" alt="03"></p> <h6> Source: <a href="http://appft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&r=1&f=G&l=50&co1=AND&d=PG01&s1=20170193282.PGNR.&OS=DN/20170193282&RS=DN/20170193282">US Patent &amp; Trademark Office</a></h6> <br> <p>This alone already sounds like what Face ID is equipped to do, doesn’t it? At least at a high level, anyway. Now, we’ll take a deeper look to see if there are more clues.</p> <p>In the summary section, it is stated that PS utilizes at least one of three parameters:
<ol><li> Skin tone detection </li> <li> Face detection </li> <li> Movement detection </li></ol></p> <p>In the detailed description, it is stipulated that a “light level determination” may be made (block 204 in FIG. 6) and provided to the skin tone detection routine, and possibly other routines as well. This could be what the Ambient Light Sensor (confirmed for iPhone X) is meant for, and could also be part of why Face ID is able to work in low light conditions.</p> <h2>Skin Tone Detection</h2> <br> <p><img src="/assets/img/2017/2017-09-21_iPhone-X_04.png" alt="04"></p> <h6> Source: <a href="http://appft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&r=1&f=G&l=50&co1=AND&d=PG01&s1=20170193282.PGNR.&OS=DN/20170193282&RS=DN/20170193282">US Patent &amp; Trademark Office</a></h6> <br> <p>From FIG. 7, we can see that depending upon the results of the light level determination, different routines will be triggered for further skin tone detection. Beyond that, the actual routines look to me like a tangle of jargon that will take me much longer to investigate. Let’s skip those for now.</p> <p>From what I can tell, the output of this tier will be a probability of user presence due to detecting a skin tone.</p> <h2>Face Detection</h2> <p>I am guessing that the face detection described here is not necessarily the same as the capturing and processing of 3D face models. Face detection has been around for a relatively long time. Even on a first-generation iPhone, every time you try to take a selfie, a square would appear on the screen -- predicting where your face might be. It’s nothing new per se.</p> <br> <p><img src="/assets/img/2017/2017-09-21_iPhone-X_05.png" alt="05"></p> <h6> Source: <a href="http://appft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&r=1&f=G&l=50&co1=AND&d=PG01&s1=20170193282.PGNR.&OS=DN/20170193282&RS=DN/20170193282">US Patent &amp; Trademark Office</a></h6> <br> <p>The face detection component here is most likely used only to determine whether a face (probably any face at all) is present. And like the skin tone detection component, it looks like a probability value will be returned for further calculations.</p> <h2>Motion Detection</h2> <p>If I were to give it a guess, I would imagine that the Proximity Sensor (also confirmed for iPhone X) is part of the motion detection component. The motion detection probably works a little like a vehicle’s park assist, with the ability to tell when you are approaching an object.</p> <h2>Tiered system</h2> <p>What about our “always on” concern? According to the patent, PS comprises multiple tiers. One reduced set of routines will indeed run all the time -- as long as the device is powered on -- to serve as a first gateway. It is possible that the TrueDepth system isn’t running in its entirety 24/7, but in a tiered manner instead.</p> <br> <p><img src="/assets/img/2017/2017-09-21_iPhone-X_02.png" alt="02"></p> <h6> Source: <a href="http://appft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&r=1&f=G&l=50&co1=AND&d=PG01&s1=20170193282.PGNR.&OS=DN/20170193282&RS=DN/20170193282">US Patent &amp; Trademark Office</a></h6> <br> <p>As for which exact component(s) belongs to the first pass, it hasn’t been clearly stated in the document.</p> <p>It has been, nevertheless, pointed out that the fusion of the parameters and detection logic may include the use of neural networks, support vector machines, and/or some other form of probabilistic machine learning-based algorithm. What this also means, is that individual parts of the system can be further trained over time to produce progressively better results.</p> <h2>What about the 3D mappings?</h2> <p>Within the Presence Sensing patent, there is no explicit description of the capturing and processing of 3D face models. And that makes sense, as each patent is only supposed to cover one invention. The complexity of 3D modeling does seem to be out of scope here.</p> <p>Upon further searches, I came across this <a href="http://appft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&r=1&f=G&l=50&co1=AND&d=PG01&s1=20170244955.PGNR.&OS=DN/20170244955&RS=DN/20170244955">other patent application</a> filed earlier in 2017 -- “Scanning projectors and image capture modules for 3D mapping”. The filing date came just a little after Apple’s acquisition of several Israeli face recognition-focused companies. Coincidentally, one Israeli inventor has been specified in the document as a team member.</p> <p>Could this particular patent application answer more of the questions? Perhaps it should be my next reading assignment.</p> <h2>Implications for AI’s future</h2> <p>As of today, the iPhone X has not officially shipped yet, so there are some nuts and bolts that have yet to be tested. Like many, I am skeptical about using Face ID in sensitive features like authorizing Apple Pay.</p> <p>That being said, there is one thing about the whole TrueDepth camera system that draws my attention -- namely, the A11 Bionic chip. I am truly impressed by how fast it appears to handle all the machine learning-related computations. This casts hopes for even more progressive research and development of standalone AI-powered apps -- standalone being the operative word here. Why? Because it reduces the reliance on cloud computing (not always secure yet, especially as far as sensitive data is concerned) and connectivity. <strong>∎</strong></p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.ceb45018.js" defer></script><script src="/assets/js/5.b399db6e.js" defer></script>
  </body>
</html>
